/*  -*- Mode: C -*-
 * ------------------------------------------------------------------
 * DO NOT EDIT THIS FILE!  It has been automatically generated.
 * ------------------------------------------------------------------
 */

#ifndef QTHREAD_COMMON_H
#define QTHREAD_COMMON_H

/* Whether C compiler supports GCC style inline assembly */
#define HAVE_GCC_INLINE_ASSEMBLY

/* if the compiler supports inline assembly, we can prevent reordering */
#undef COMPILER_FENCE

/* Architecture type of assembly to use */
#undef QTHREAD_ASSEMBLY_ARCH

/* use inlined functions */
#undef QTHREAD_INLINE

/* if the compiler supports __attribute__((deprecated)) */
#undef Q_DEPRECATED

#ifndef __powerpc
#define BITFIELD_ORDER_REVERSE
#else
// ARM processors can technically change modes between
// big-endian and little-endian which also reverses the
// bitfield order. The overwhelming majority of the time
// they're run in little-endian mode though.
#define BITFIELD_ORDER_FORWARD
#endif

/* builtin cas supported */
#define QTHREAD_ATOMIC_CAS 1

/* if the compiler supports __sync_val_compare_and_swap on 32-bit ints */
#define QTHREAD_ATOMIC_CAS32 1

/* if the compiler supports __sync_val_compare_and_swap on 64-bit ints */
#define QTHREAD_ATOMIC_CAS64 1

/* if the compiler supports __sync_val_compare_and_swap on pointers */
#define QTHREAD_ATOMIC_CAS_PTR 1

/* builtin incr supported */
#define QTHREAD_ATOMIC_INCR 1

#ifdef __cplusplus
#ifdef __GNUC__
#define restrict __restrict
#else
#define restrict
#endif
#endif

#ifdef __GNUC__
#define QTHREAD_TRAP() __builtin_trap()
#else
#include "signal.h"
#define QTHREAD_TRAP() raise(SIGABRT)
#endif

/* Architecture defines */
#define QTHREAD_UNSUPPORTED 0
#define QTHREAD_IA32        1
#define QTHREAD_AMD64       2
#define QTHREAD_POWERPC32   6
#define QTHREAD_POWERPC64   7
#define QTHREAD_ARM         12
#define QTHREAD_ARMV8_A64   13

#endif
